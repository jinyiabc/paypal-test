<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
</head>

<body>
    <!-- <form id="testimonial form" method = "POST" action = "/profile">
    <label for="firstname">First Name</label>
    <input type="text" id="firstname" name="firstname">
    <label for="lastname">Last Name</label>
    <input type="text" id="lastname" name="lastname"> </br></br>
    <label for="address">Street Address</label>
    <input type="text" id="address" name="address"></br></br>
    <label for="address2">Street Address Line 2</label>
    <input type="text" id="address2" name="address2"></br></br>
    <label for="city">City</label>
    <input type="text" id="city" name="city">
    <label for="state/province">State or Province</label>
    <input type="text" id="state/province" name="state/province"></br></br>
    <label for="postal/zipcode">Postal/Zipcode</label>
    <input type="text" id="postal/zipcode" name="postal/zipcode">
    <label for="country">Country</label>
    <input type="text" id="country" name="country"></br></br>
    <label for="email">Email Address</label>
    <input type="text" id="email" name="email address"></br></br>
    Testimonial:</br>
    <textarea rows="10" cols="40"></textarea></br></br>
    <input type="submit" value="Submit">
</form> -->
    <form method="post" action="/api/paypal/payment/create">
        <input type="text" name="user[name]">
        <input type="text" name="user[email]">
        <input type="submit" value="Submit">
    </form>

    <div id="paypal-button-container"></div>
    <!-- <script src="https://js.braintreegateway.com/web/3.25.0/js/client.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.25.0/js/paypal-checkout.min.js"></script> -->
    <script>
        paypal.Button.render({

            env: 'sandbox', // sandbox | production

            // Show the buyer a 'Pay Now' button in the checkout flow
            commit: true,

            // payment() is called when the button is clicked
            payment: function() {

                // Set up a url on your server to create the payment
                var CREATE_URL = '/demo/checkout/api/paypal/payment/create/';

                // Make a call to your server to set up the payment
                return paypal.request.post(CREATE_URL)
                    .then(function(res) {
                        return res.paymentID;
                    });
            },

            // onAuthorize() is called when the buyer approves the payment
            onAuthorize: function(data, actions) {

                // Set up a url on your server to execute the payment
                var EXECUTE_URL = '/demo/checkout/api/paypal/payment/execute/';

                // Set up the data you need to pass to your server
                var data = {
                    paymentID: data.paymentID,
                    payerID: data.payerID
                };

                // Make a call to your server to execute the payment
                return paypal.request.post(EXECUTE_URL, data)
                    .then(function (res) {
                        window.alert('Payment Complete!');
                    });
            }

        }, '#paypal-button-container');
    </script>
</body>

</html>
